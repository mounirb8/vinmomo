<Window x:Class="vinmomo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:vinmomo"
        xmlns:viewModels="clr-namespace:vinmomo.ViewModels"
        mc:Ignorable="d"
        Title="Annuaire d'entreprise"
        Height="650" Width="1000"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <viewModels:MainViewModel/>
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ==================== BARRE DE RECHERCHE ==================== -->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Top" Margin="0,0,0,10">
            <TextBlock Text="Rechercher :" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBox Width="200" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,20,0"/>

            <TextBlock Text="Site :" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox Width="150"
                      ItemsSource="{Binding Sites}"
                      SelectedItem="{Binding SelectedSite}"
                      DisplayMemberPath="Ville"
                      Margin="0,0,20,0"/>

            <TextBlock Text="Service :" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox Width="150"
                      ItemsSource="{Binding Services}"
                      SelectedItem="{Binding SelectedService}"
                      DisplayMemberPath="Nom"/>
        </StackPanel>

        <!-- ==================== CONTENU PRINCIPAL ==================== -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- TABLEAU DES SALARIÉS -->
            <DataGrid x:Name="SalariesGrid"
                      ItemsSource="{Binding SalariesView}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      SelectionUnit="FullRow"
                      Margin="0,0,10,0"
                      Grid.Column="0"
                      RowHeight="30">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="*"/>
                    <DataGridTextColumn Header="Prénom" Binding="{Binding Prenom}" Width="*"/>
                    <DataGridTextColumn Header="Service" Binding="{Binding Service.Nom}" Width="*"/>
                    <DataGridTextColumn Header="Site" Binding="{Binding Site.Ville}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- FICHE DÉTAILLÉE DU SALARIÉ -->
            <Border Grid.Column="1"
                    BorderBrush="Gray"
                    BorderThickness="1"
                    CornerRadius="5"
                    Padding="15"
                    Background="#F9F9F9">

                <StackPanel>
                    <TextBlock Text="Fiche Salarié" FontWeight="Bold" FontSize="18" Margin="0,0,0,15" TextAlignment="Center"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Nom :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.Nom, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Prénom :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.Prenom, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Téléphone Fixe :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.TelephoneFixe, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Téléphone Portable :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.TelephonePortable, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Email :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.Email, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Service :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.Service.Nom, ElementName=SalariesGrid}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                        <TextBlock Text="Site :" FontWeight="Bold" Width="130"/>
                        <TextBlock Text="{Binding SelectedItem.Site.Ville, ElementName=SalariesGrid}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
